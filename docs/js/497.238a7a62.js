"use strict";(self["webpackChunkphotoslide"]=self["webpackChunkphotoslide"]||[]).push([[497],{717:function(e,t,a){a.d(t,{Z:function(){return c}});var o=a(252),l=a(577);const n=["type","disabled","title"];function r(e,t,a,r,d,i){return(0,o.wg)(),(0,o.iD)("button",{type:e.type,disabled:e.disabled,title:e.title,class:(0,l.C_)(["button-basic",e.color&&`button-basic--color-${e.color}`]),onClick:t[0]||(t[0]=t=>e.$emit("click"))},[(0,o.WI)(e.$slots,"default",{},void 0,!0)],10,n)}var d=(0,o.aZ)({name:"ButtonBasic",props:{type:{type:String,default:"button"},title:String,color:String,disabled:Boolean},emits:{click:null}}),i=a(744);const s=(0,i.Z)(d,[["render",r],["__scopeId","data-v-129ff1a2"]]);var c=s},521:function(e,t,a){a.d(t,{Z:function(){return f}});var o=a(252),l=a(577);const n={class:"form-radio__wrap"},r={class:"form-radio__button"},d=["disabled","onClick"],i=["name","id","value","checked"];function s(e,t,a,s,c,u){return(0,o.wg)(),(0,o.iD)("nav",{class:(0,l.C_)(["form form-radio",e.inline&&"form form-radio--inline"])},[(0,o._)("div",n,["button"===e.type?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(e.items,((t,a)=>((0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("button",{type:"button",disabled:e.modelValue===t.key||!e.modelValue&&0===a,onClick:a=>e.onClickItem(t.key)},(0,l.zw)(t.label),9,d)])))),256)):((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.items,((a,n)=>((0,o.wg)(),(0,o.iD)("label",null,[(0,o._)("input",{type:"radio",name:e.name,id:0===n?e.id:void 0,value:a.key,checked:e.modelValue===a.key||!e.modelValue&&0===n,onChange:t[0]||(t[0]=(...t)=>e.onChange&&e.onChange(...t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur:modelValue",t.target.value))},null,40,i),(0,o._)("em",null,(0,l.zw)(a.label),1)])))),256))])],2)}var c=a(875),u=(0,o.aZ)({name:"FormRadio",props:{type:String,items:{type:Array,required:!0},name:String,id:String,inline:Boolean,modelType:String,modelValue:[String,Number,Boolean]},setup(e,t){function a(a){t.emit("update:modelValue",(0,c.Ge)(e.modelType,a.target.value))}function o(a){t.emit("update:modelValue",(0,c.Ge)(e.modelType,a))}return{onChange:a,onClickItem:o}},emits:{"update:modelValue":null,"blur:modelValue":null}}),m=a(744);const p=(0,m.Z)(u,[["render",s],["__scopeId","data-v-87b34480"]]);var f=p},705:function(e,t,a){a.d(t,{Z:function(){return p}});var o=a(252),l=a(577);const n=["name","id","required","value","disabled"],r={key:0,value:"",disabled:!1};function d(e,t,a,d,i,s){const c=(0,o.up)("Icon");return(0,o.wg)(),(0,o.iD)("label",{class:(0,l.C_)(["form","form-select",e.disabled&&"form-select--disabled"])},[(0,o._)("select",{name:e.name,id:e.id,required:e.required,value:e.modelValue,disabled:e.disabled,class:"form-select__body",onChange:t[0]||(t[0]=(...t)=>e.onChange&&e.onChange(...t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur:modelValue",t.target.value))},[e.placeholder?((0,o.wg)(),(0,o.iD)("option",r,(0,l.zw)(e.placeholder),1)):(0,o.kq)("",!0),(0,o.WI)(e.$slots,"default",{},void 0,!0)],40,n),(0,o.Wm)(c,{"icon-name":"arrow-down",class:"form-select__icon"})],2)}var i=a(875),s=a(787),c=(0,o.aZ)({name:"FormSelect",components:{Icon:s.Z},props:{name:{type:String,required:!0},id:String,disabled:Boolean,required:Boolean,placeholder:{type:[String,null],default:null},modelType:String,modelValue:[String,Number]},setup(e,t){function a(a){t.emit("update:modelValue",i.Ge(e.modelType,a.target.value))}return{onChange:a}},emits:{"update:modelValue":null,"blur:modelValue":null}}),u=a(744);const m=(0,u.Z)(c,[["render",d],["__scopeId","data-v-6eb56a14"]]);var p=m},482:function(e,t,a){a.d(t,{Z:function(){return p}});var o=a(252),l=a(577);const n=["type","name","id","value","placeholder","required","min","max","step","maxlength","rows","size"],r=["type","name","id","value","placeholder","required","min","max","step","maxlength","size"];function d(e,t,a,d,i,s){return"textarea"===e.type?((0,o.wg)(),(0,o.iD)("textarea",{key:0,ref:"root",type:e.type,name:e.name,id:e.id,value:e.modelValue,placeholder:e.placeholder,required:e.required,min:e.min,max:e.max,step:e.step,maxlength:e.maxlength,rows:e.rows,size:e.size,class:(0,l.C_)(["form","form-text",e.inline&&"form-text--inline",e.color&&`form-text--color-${e.color}`]),onInput:t[0]||(t[0]=(...t)=>e.onChange&&e.onChange(...t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur:modelValue",t.target.value))},null,42,n)):((0,o.wg)(),(0,o.iD)("input",{key:1,ref:"root",type:e.type,name:e.name,id:e.id,value:e.modelValue,placeholder:e.placeholder,required:e.required,min:e.min,max:e.max,step:e.step,maxlength:e.maxlength,size:e.size,class:(0,l.C_)(["form","form-text",e.inline&&"form-text--inline",e.color&&`form-text--color-${e.color}`]),onInput:t[2]||(t[2]=(...t)=>e.onChange&&e.onChange(...t)),onBlur:t[3]||(t[3]=t=>e.$emit("blur:modelValue",t.target.value))},null,42,r))}var i=a(262),s=a(875),c=(0,o.aZ)({name:"FormText",props:{type:{type:String,default:"text"},name:String,id:String,placeholder:String,required:Boolean,min:Number,max:Number,step:Number,maxlength:Number,inline:Boolean,rows:{type:Number,default:3},size:{type:Number,default:10},color:String,modelType:String,modelValue:[String,Number,Boolean,Array]},setup(e,t){const a=(0,i.iH)(0);function o(a){t.emit("update:modelValue",s.Ge(e.modelType,a.target.value))}function l(){a.value&&a.value.focus()}return{root:a,onChange:o,focus:l}},emits:{"update:modelValue":null,"blur:modelValue":null}}),u=a(744);const m=(0,u.Z)(c,[["render",d],["__scopeId","data-v-0f4796d2"]]);var p=m},497:function(e,t,a){a.r(t),a.d(t,{default:function(){return ye}});var o=a(252),l=a(577);const n=e=>((0,o.dD)("data-v-2d6796d6"),e=e(),(0,o.Cn)(),e),r={class:"pref-data"},d=n((()=>(0,o._)("legend",null,"Data fields",-1))),i={class:"fields"},s={class:"field-basic"},c={class:"field-title"},u={class:"field-basic__body"},m={class:"manage-tree"},p={class:"manage-tree-toolbar"},f={class:"manage-tree-body"};function g(e,t,a,n,g,b){const _=(0,o.up)("FormRadio"),v=(0,o.up)("ButtonIcon"),h=(0,o.up)("Manage"),y=(0,o.up)("FormText"),w=(0,o.up)("ImportData"),S=(0,o.up)("ModalWrapper");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("fieldset",r,[d,(0,o._)("div",i,[(0,o._)("div",s,[(0,o._)("h3",c,(0,l.zw)(e.$t("preference.data.tree.title")),1),(0,o._)("div",u,[(0,o._)("div",m,[(0,o._)("nav",p,[(0,o._)("div",null,[(0,o.Wm)(_,{type:"button",name:"pref_mode",id:"prof_mode",title:e.$t("preference.data.tree.changeMode"),items:[{key:"advanced",label:e.$t("preference.data.tree.mode_advanced")},{key:"basic",label:e.$t("preference.data.tree.mode_basic")}],modelValue:e.localState.mode,"onUpdate:modelValue":e.onChangeMode,class:"manage-tree__mode"},null,8,["title","items","modelValue","onUpdate:modelValue"])]),(0,o._)("div",null,[(0,o.Wm)(v,{title:e.$t("preference.data.tree.importData"),"icon-name":"download",class:"manage-tree__button",onClick:t[0]||(t[0]=t=>e.localState.showImportData=!0)},null,8,["title"])])]),(0,o._)("div",f,["basic"===e.localState.mode?((0,o.wg)(),(0,o.j4)(h,{key:0,tree:e.state.tree,onUpdate:e.onUpdateTreeUI},null,8,["tree","onUpdate"])):"advanced"===e.localState.mode?((0,o.wg)(),(0,o.j4)(y,{key:1,ref:"tree",type:"textarea",name:"pref_tree",id:"pref_tree",placeholder:e.$t("preference.data.tree.textPlaceholder"),rows:15,color:e.localState.textTreeColor,modelValue:e.state.tree,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.state.tree=t),e.onUpdateTreeSource]},null,8,["placeholder","color","modelValue","onUpdate:modelValue"])):(0,o.kq)("",!0)])])])])])]),((0,o.wg)(),(0,o.j4)(o.lR,{to:"#modal"},[e.localState.showImportData?((0,o.wg)(),(0,o.j4)(S,{key:0,title:"Get slide items",class:"pref-data__import-data",onClose:t[2]||(t[2]=t=>e.localState.showImportData=!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{onUpdate:e.onImportData},null,8,["onUpdate"])])),_:1})):(0,o.kq)("",!0)]))],64)}var b=a(262),_=a(150),v=a(903),h=a(928),y=a(482),w=a(705),S=a(521);const k={type:"button",class:"button-icon"};function C(e,t,a,l,n,r){const d=(0,o.up)("Icon");return(0,o.wg)(),(0,o.iD)("button",k,[(0,o.Wm)(d,{"icon-name":e.iconName},null,8,["icon-name"])])}var D=a(787),I=(0,o.aZ)({name:"PreferenceDataButtonIcon",components:{Icon:D.Z},props:{iconName:String}}),x=a(744);const V=(0,x.Z)(I,[["render",C],["__scopeId","data-v-16cbf5a6"]]);var Z=V;const $={class:"manage-tree-ui"},T=(0,o._)("p",null,"coming soon..",-1),q=[T];function B(e,t,a,l,n,r){return(0,o.wg)(),(0,o.iD)("article",$,q)}var U=(0,o.aZ)({name:"PreferenceDataManage",components:{},props:{tree:{type:Object,required:!0}},setup(e,t){},emits:{update:null}});const z=(0,x.Z)(U,[["render",B]]);var F=z;const W={class:"modal-wrapper__header"},N=["title"],j={class:"modal-wrapper__body"};function M(e,t,a,n,r,d){const i=(0,o.up)("Icon");return(0,o.wg)(),(0,o.iD)("article",{class:"modal-wrapper",onClick:t[2]||(t[2]=t=>e.$emit("close"))},[(0,o._)("div",{class:"modal-wrapper__box",onClick:t[1]||(t[1]=e=>{e.stopPropagation()})},[(0,o._)("header",W,[(0,o._)("h2",null,(0,l.zw)(e.title),1),(0,o._)("nav",null,[(0,o._)("button",{type:"button",title:e.$t("base.close"),onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,o.Wm)(i,{"icon-name":"x"})],8,N)])]),(0,o._)("div",j,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])])])}var H=(0,o.aZ)({name:"ModalWrapper",components:{Icon:D.Z},props:{title:{type:String,default:"Title"}},emits:{close:null}});const O=(0,x.Z)(H,[["render",M],["__scopeId","data-v-4a3388c8"]]);var P=O;const G=e=>((0,o.dD)("data-v-d0cba3fa"),e=e(),(0,o.Cn)(),e),R=G((()=>(0,o._)("legend",null,"Import data fields",-1))),J={class:"fields"},E={class:"field-basic"},A={class:"field-basic__body"},Y={key:0,class:"field-basic"},K={class:"field-title"},Q={for:"pref_address"},L={class:"field-description"},X={class:"field-basic__body"},ee={key:1,class:"field-basic"},te={class:"field-title"},ae={for:"pref_address"},oe={class:"field-description"},le={class:"field-basic__body"},ne={class:"submit-buttons"};function re(e,t,a,n,r,d){const i=(0,o.up)("FormRadio"),s=(0,o.up)("FormText"),c=(0,o.up)("FormUpload"),u=(0,o.up)("ButtonBasic");return(0,o.wg)(),(0,o.iD)("form",{class:"import-data",onSubmit:t[2]||(t[2]=(...t)=>e.onSubmit&&e.onSubmit(...t))},[(0,o._)("fieldset",null,[R,(0,o._)("div",J,[(0,o._)("div",E,[(0,o._)("div",A,[(0,o.Wm)(i,{name:"pref_mode",id:"prof_mode",title:e.$t("preference.data.importData.mode.description"),items:[{key:"address",label:e.$t("preference.data.importData.mode.label_address")},{key:"file",label:e.$t("preference.data.importData.mode.label_file")}],modelValue:e.state.mode,"onUpdate:modelValue":t[0]||(t[0]=t=>e.state.mode=t)},null,8,["title","items","modelValue"])])]),"address"===e.state.mode?((0,o.wg)(),(0,o.iD)("div",Y,[(0,o._)("h3",K,[(0,o._)("label",Q,(0,l.zw)(e.$t("preference.data.importData.address.title")),1)]),(0,o._)("p",L,(0,l.zw)(e.$t("preference.data.importData.address.description")),1),(0,o._)("div",X,[(0,o.Wm)(s,{ref:"address",name:"pref_address",id:"pref_address",placeholder:"Please input address",modelValue:e.state.address,"onUpdate:modelValue":t[1]||(t[1]=t=>e.state.address=t)},null,8,["modelValue"])])])):(0,o.kq)("",!0),"file"===e.state.mode?((0,o.wg)(),(0,o.iD)("div",ee,[(0,o._)("h3",te,[(0,o._)("label",ae,(0,l.zw)(e.$t("preference.data.importData.file.title")),1)]),(0,o._)("p",oe,(0,l.zw)(e.$t("preference.data.importData.file.description")),1),(0,o._)("div",le,[(0,o.Wm)(c,{ref:"file",accept:"application/json",label:e.$t("preference.data.importData.file.placeholder"),onChange:e.onSelectFile},null,8,["label","onChange"])])])):(0,o.kq)("",!0)]),(0,o._)("nav",ne,[(0,o._)("div",null,[(0,o.Wm)(u,{type:"submit",color:e.state.processing?"":"key",disabled:e.state.processing,inline:!0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.state.processing?e.$t("preference.data.importData.submit.processing"):e.$t("preference.data.importData.submit.getData")),1)])),_:1},8,["color","disabled"])])])])],32)}var de=a(875);const ie=["accept","disabled"],se={class:"form-upload__body"};function ce(e,t,a,n,r,d){const i=(0,o.up)("Icon");return(0,o.wg)(),(0,o.iD)("label",{class:(0,l.C_)(["form","form-upload",e.disabled&&"form-upload--disabled"])},[(0,o._)("input",{ref:"input",type:"file",class:"form-upload__input",accept:e.accept,disabled:e.disabled,onChange:t[0]||(t[0]=(...t)=>e.onChange&&e.onChange(...t))},null,40,ie),(0,o._)("span",se,[(0,o.Wm)(i,{"icon-name":"file"}),(0,o._)("em",null,(0,l.zw)(e.state.filename||e.label),1),(0,o._)("i",null,[(0,o.Wm)(i,{"icon-name":"upload"})])])],2)}var ue=(0,o.aZ)({name:"FormUpload",components:{Icon:D.Z},props:{name:String,id:String,label:{type:String,default:"Please upload file"},disabled:Boolean,accept:String},setup(e,t){let a=(0,b.qj)({filename:""});const o=(0,b.iH)(null);function l(e){e.target.files&&e.target.files[0]&&(a.filename=e.target.files[0].name,t.emit("change",e.target.files))}function n(){o.value.focus()}return{state:a,input:o,onChange:l,focus:n}},emits:{change:null}});const me=(0,x.Z)(ue,[["render",ce],["__scopeId","data-v-30d9c377"]]);var pe=me,fe=a(717),ge=(0,o.aZ)({name:"preference-data-import-data",components:{FormRadio:S.Z,FormText:y.Z,FormUpload:pe,ButtonBasic:fe.Z},setup(e,t){const{t:a}=(0,_.QT)({useScope:"global"});let o=(0,b.qj)({mode:"address",address:"https://raw.githubusercontent.com/warrengalyen/photoslide/master/resource/example/tree.json",file:null,processing:!1});const l=(0,b.iH)(null),n=(0,b.iH)(null);function r(e){e[0]&&(o.file=e[0])}async function d(e){e.preventDefault(),o.processing=!0;try{let e;switch(o.mode){case"address":if(!o.address)throw l.value.focus(),new Error("no address");e=await(0,de.SA)(o.address);break;case"file":if(!o.file)throw n.value.focus(),new Error("no file");e=await(0,de.Lc)(o.file);break;default:throw new Error("no mode")}(0,v.Sk)(e),t.emit("update",e),o.processing=!1}catch(e){window.dev&&console.error(e.message),alert(a("preference.data.alerts.failedGetData")),o.processing=!1}}return{state:o,address:l,file:n,onSelectFile:r,onSubmit:d}},emits:{update:null}});const be=(0,x.Z)(ge,[["render",re],["__scopeId","data-v-d0cba3fa"]]);var _e=be,ve=(0,o.aZ)({name:"PreferenceData",components:{FormText:y.Z,FormSelect:w.Z,FormRadio:S.Z,ButtonIcon:Z,Manage:F,ModalWrapper:P,ImportData:_e},props:{structure:Object},setup(e,t){const{t:a}=(0,_.QT)({useScope:"global"});let l,n=(0,b.qj)({mode:"advanced",showImportData:!1,textTreeColor:void 0,computedTreeText:(0,o.Fl)((()=>JSON.stringify(r.tree,null,2)))}),r=(0,b.qj)({tree:"advanced"===n.mode?JSON.stringify(e.structure.tree,null,2):e.structure.tree});function d(e){try{switch(e){case"basic":let t=JSON.parse(r.tree);if(!(0,v.Sk)(t))throw new Error("error tree");r.tree=t,n.mode=e;break;case"advanced":r.tree=(0,h.IC)(r.tree),n.mode=e;break}}catch(t){window.dev&&console.error(t.message),alert(a("preference.data.alerts.invalidData"))}}function i(e){l&&clearTimeout(l),l=setTimeout((()=>{try{let a=JSON.parse(e);n.textTreeColor=void 0,t.emit("update",{tree:a})}catch(a){n.textTreeColor="error"}}),600)}function s(e){console.log("call onUpdateTreeUI()")}function c(e){switch(n.mode){case"advanced":r.tree=(0,h.IC)(e);break;default:r.tree=e;break}t.emit("update",{tree:e}),n.showImportData=!1}return{state:r,localState:n,onChangeMode:d,onUpdateTreeSource:i,onUpdateTreeUI:s,onImportData:c}},emits:{update:null}});const he=(0,x.Z)(ve,[["render",g],["__scopeId","data-v-2d6796d6"]]);var ye=he},928:function(e,t,a){function o(e){return`0${e}`.slice(-2)}function l(e){return JSON.stringify(e,null,2)}a.d(t,{IC:function(){return l},jj:function(){return o}})}}]);