"use strict";(self["webpackChunkphotoslide"]=self["webpackChunkphotoslide"]||[]).push([[181],{409:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(252),r=a(577);const n=["disabled","title"];function o(e,t,a,o,i,s){return(0,l.wg)(),(0,l.iD)("button",{type:"button",disabled:e.disabled,title:e.title,class:(0,r.C_)(["button-basic",e.color&&`button-basic--color-${e.color}`]),onClick:t[0]||(t[0]=t=>e.$emit("click"))},[(0,l.WI)(e.$slots,"default",{},void 0,!0)],10,n)}var i=(0,l.aZ)({name:"ButtonBasic",props:{type:String,title:String,color:String,disabled:Boolean},emits:{click:null}}),s=a(744);const d=(0,s.Z)(i,[["render",o],["__scopeId","data-v-ba84435a"]]);var u=d},482:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(252),r=a(577);const n=["type","name","id","value","placeholder","required","min","max","step","maxlength","rows","size"],o=["type","name","id","value","placeholder","required","min","max","step","maxlength","size"];function i(e,t,a,i,s,d){return"textarea"===e.type?((0,l.wg)(),(0,l.iD)("textarea",{key:0,ref:"root",type:e.type,name:e.name,id:e.id,value:e.modelValue,placeholder:e.placeholder,required:e.required,min:e.min,max:e.max,step:e.step,maxlength:e.maxlength,rows:e.rows,size:e.size,class:(0,r.C_)(["form","form-text",e.inline&&"form-text--inline",e.color&&`form-text--color-${e.color}`]),onInput:t[0]||(t[0]=(...t)=>e.onChange&&e.onChange(...t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur:modelValue",t.target.value))},null,42,n)):((0,l.wg)(),(0,l.iD)("input",{key:1,ref:"root",type:e.type,name:e.name,id:e.id,value:e.modelValue,placeholder:e.placeholder,required:e.required,min:e.min,max:e.max,step:e.step,maxlength:e.maxlength,size:e.size,class:(0,r.C_)(["form","form-text",e.inline&&"form-text--inline",e.color&&`form-text--color-${e.color}`]),onInput:t[2]||(t[2]=(...t)=>e.onChange&&e.onChange(...t)),onBlur:t[3]||(t[3]=t=>e.$emit("blur:modelValue",t.target.value))},null,42,o))}var s=a(262),d=a(875),u=(0,l.aZ)({name:"FormText",props:{type:{type:String,default:"text"},name:String,id:String,placeholder:String,required:Boolean,min:Number,max:Number,step:Number,maxlength:Number,inline:Boolean,rows:{type:Number,default:3},size:{type:Number,default:10},color:String,modelType:String,modelValue:[String,Number,Boolean,Array]},setup(e,t){const a=(0,s.iH)(0);function l(a){t.emit("update:modelValue",d.Ge(e.modelType,a.target.value))}function r(){a.value&&a.value.focus()}return{root:a,onChange:l,focus:r}},emits:{"update:modelValue":null,"blur:modelValue":null}}),c=a(744);const p=(0,c.Z)(u,[["render",i],["__scopeId","data-v-0f4796d2"]]);var m=p},181:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var l=a(252),r=a(577),n=a(963);const o=e=>((0,l.dD)("data-v-0a4b9a4d"),e=e(),(0,l.Cn)(),e),i=o((()=>(0,l._)("legend",null,"Data fields",-1))),s={class:"fields"},d={class:"field-basic"},u={class:"field-title"},c={for:"apiAddress"},p={class:"field-description"},m={class:"field-multiple"},f={class:"field-multiple__body"},b=o((()=>(0,l._)("p",{class:"field-description"}," get data through restapi ",-1))),g={class:"field-upload"},h={class:"field-description"},_={class:"field-basic"},v={class:"field-title"},w={for:"pref_slides"},y={class:"field-description"},S={class:"field-basic__body"};function x(e,t,a,o,x,D){const C=(0,l.up)("FormText"),A=(0,l.up)("ButtonBasic"),B=(0,l.up)("FormUpload");return(0,l.wg)(),(0,l.iD)("fieldset",null,[i,(0,l._)("div",s,[(0,l._)("div",d,[(0,l._)("h3",u,[(0,l._)("label",c,(0,r.zw)(e.$t("preference.data.importSlidesData.title")),1)]),(0,l._)("p",p,(0,r.zw)(e.$t("preference.data.importSlidesData.description")),1),(0,l._)("div",m,[(0,l._)("div",f,[(0,l.Wm)(C,{ref:"textApiAddress",type:"text",name:"apiAddress",id:"apiAddress",disabled:e.localState.apiAddressDisableButton,modelValue:e.localState.apiAddress,"onUpdate:modelValue":t[0]||(t[0]=t=>e.localState.apiAddress=t),placeholder:"https://service.com/filename.json",onKeydown:(0,n.D2)(e.importDataOnAddress,["enter"])},null,8,["disabled","modelValue","onKeydown"])]),(0,l._)("div",null,[(0,l.Wm)(A,{color:"key",disabled:e.localState.apiAddressDisableButton,onClick:e.importDataOnAddress},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.$t("preference.data.importSlidesData.label_getData")),1)])),_:1},8,["disabled","onClick"])])]),b,(0,l._)("div",g,[(0,l.Wm)(B,{ref:"fileUpload",accept:"application/json",onChange:e.importDataOnFile},null,8,["onChange"])]),(0,l._)("p",h,(0,r.zw)(e.$t("preference.data.importSlidesData.desc_file")),1)]),(0,l._)("div",_,[(0,l._)("h3",v,[(0,l._)("label",w,(0,r.zw)(e.$t("preference.data.slides.title")),1)]),(0,l._)("p",y,(0,r.zw)(e.$t("preference.data.slides.description")),1),(0,l._)("div",S,[(0,l.Wm)(C,{ref:"textSlides",type:"textarea",name:"pref_slides",id:"pref_slides",placeholder:"Please input slides code",color:e.state.slidesColor,rows:10,modelValue:e.state.slides,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.state.slides=t),e.onUpdateSlideSource]},null,8,["color","modelValue","onUpdate:modelValue"])])])])])}var D=a(262),C=a(150),A=a(903),B=a(928),k=a(482);const q=["accept","disabled"],V={class:"form-upload__body"};function z(e,t,a,n,o,i){const s=(0,l.up)("Icon");return(0,l.wg)(),(0,l.iD)("label",{class:(0,r.C_)(["form","form-upload",e.disabled&&"form-upload--disabled"])},[e.state.input?((0,l.wg)(),(0,l.iD)("input",{key:0,type:"file",class:"form-upload__input",accept:e.accept,disabled:e.disabled,onChange:t[0]||(t[0]=(...t)=>e.onChange&&e.onChange(...t))},null,40,q)):(0,l.kq)("",!0),(0,l._)("span",V,[(0,l.Wm)(s,{"icon-name":"file"}),(0,l._)("em",null,(0,r.zw)(e.label),1),(0,l._)("i",null,[(0,l.Wm)(s,{"icon-name":"upload"})])])],2)}var $=a(875),Z=a(44),N=(0,l.aZ)({name:"FormUpload",components:{Icon:Z.Z},props:{name:String,id:String,label:{type:String,default:"Please upload file"},disabled:Boolean,accept:String},setup(e,t){let a=(0,D.qj)({input:!0});function l(e){t.emit("change",e.target.files),r().then()}async function r(){a.input=!1,await $._v(50),a.input=!0}return{state:a,onChange:l}},emits:{change:null}}),U=a(744);const F=(0,U.Z)(N,[["render",z],["__scopeId","data-v-40ec8b24"]]);var O=F,T=a(409),I=(0,l.aZ)({name:"PreferenceData",components:{FormText:k.Z,FormUpload:O,ButtonBasic:T.Z},props:{structure:Object},setup(e,t){const{t:a}=(0,C.QT)({useScope:"global"});let r=(0,D.qj)({apiAddress:"https://",apiAddressDisableButton:!1,slidesColor:void 0}),n=(0,D.qj)({slides:e.structure.slides});const o=(0,D.iH)(null),i=(0,D.iH)(null),s=(0,D.iH)(null);let d;function u(){const e=A.Jl(n);t.emit("update",e)}function c(e){function t(){alert(a("preference.data.alerts.failedGetData")),r.apiAddressDisableButton=!1,(0,l.Y3)().then((()=>i.value.focus()))}e&&e.preventDefault();try{if(r.apiAddressDisableButton=!0,!r.apiAddress)throw new Error("no address");if(!B.D(r.apiAddress))throw new Error("wrong url");const a=new XMLHttpRequest;if(!a)throw new Error("no XMLHttpRequest");a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE)try{if(200!==a.status)throw new Error("failed request url");JSON.parse(a.responseText),n.slides=a.responseText,f(),r.apiAddressDisableButton=!1,o.value.focus()}catch(e){t()}},a.open("get",r.apiAddress),a.send()}catch(e){t()}}function p(e){if(!e||!e.length)return void alert(a("preference.data.alerts.noSelectedFile"));const t=e[0],l=new FileReader;l.onload=e=>{try{let t=JSON.parse(String(e.target.result));n.slides=JSON.stringify(t,null,2),f(),o.value.focus()}catch(e){alert(a("preference.data.alerts.failedGetFile"))}},l.readAsText(t)}function m(){d&&clearTimeout(d),u(),d=setTimeout(f,1e3)}function f(){try{let e=JSON.parse(n.slides);if(!A.Jt(e))throw new Error("error parse");n.slidesColor=void 0}catch(e){n.slidesColor="error"}}return{state:n,localState:r,textSlides:o,textApiAddress:i,fileUpload:s,onSave:u,importDataOnAddress:c,importDataOnFile:p,onUpdateSlideSource:m}},emits:{update:null}});const j=(0,U.Z)(I,[["render",x],["__scopeId","data-v-0a4b9a4d"]]);var H=j},928:function(e,t,a){function l(e){return`0${e}`.slice(-2)}function r(e){let t;try{t=new URL(e)}catch(a){return!1}return"http:"===t.protocol||"https:"===t.protocol}a.d(t,{D:function(){return r},j:function(){return l}})}}]);